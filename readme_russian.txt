,-.----.                                                              ,--.                                                                
\    /  \                         ___                 ,--,        ,--/  /|                                 ,---,       ___                
|   :    \                      ,--.'|_             ,--.'|     ,---,': / '              ,--,             ,--.' |     ,--.'|_              
|   |  .\ :   ,---.    __  ,-.  |  | :,'            |  | :     :   : '/ /       ,---, ,--.'|             |  |  :     |  | :,'             
.   :  |: |  '   ,'\ ,' ,'/ /|  :  : ' :            :  : '     |   '   ,    ,-+-. /  ||  |,     ,----._,.:  :  :     :  : ' :  .--.--.    
|   |   \ : /   /   |'  | |' |.;__,'  /    ,--.--.  |  ' |     '   |  /    ,--.'|'   |`--'_    /   /  ' /:  |  |,--.;__,'  /  /  /    '   
|   : .   /.   ; ,. :|  |   ,'|  |   |    /       \ '  | |     |   ;  ;   |   |  ,"' |,' ,'|  |   :     ||  :  '   |  |   |  |  :  /`./   
;   | |`-' '   | |: :'  :  /  :__,'| :   .--.  .-. ||  | :     :   '   \  |   | /  | |'  | |  |   | .\  .|  |   /' :__,'| :  |  :  ;_     
|   | ;    '   | .; :|  | '     '  : |__  \__\/: . .'  : |__   |   |    ' |   | |  | ||  | :  .   ; ';  |'  :  | | | '  : |__ \  \    `.  
:   ' |    |   :    |;  : |     |  | '.'| ," .--.; ||  | '.'|  '   : |.  \|   | |  |/ '  : |__'   .   . ||  |  ' | : |  | '.'| `----.   \ 
:   : :     \   \  / |  , ;     ;  :    ;/  /  ,.  |;  :    ;  |   | '_\.'|   | |--'  |  | '.'|`---`-'| ||  :  :_:,' ;  :    ;/  /`--'  / 
|   | :      `----'   ---'      |  ,   /;  :   .'   \  ,   /   '   : |    |   |/      ;  :    ;.'__/\_: ||  | ,'     |  ,   /'--'.     /  
`---'.|                          ---`-' |  ,     .-./---`-'    ;   |,'    '---'       |  ,   / |   :    :`--''        ---`-'   `--'---'   
  `---`                                  `--`---'              '---'                   ---`-'   \   \  /                                  
                                                                                                 `--`-'                                   
----------------------------------------------------------------------------------------------------------------------------------------


pk_dedicated_server
-----------------------

Инструкции

    1. Откройте приложение pk_dedicated_server.exe, и будут созданы файл журнала, конфигурационный файл и папка для сохранения данных.
    2. Закройте приложение pk_dedicated_server.exe, чтобы настроить конфигурационный файл.
    3. Чтобы настроить сервер, откройте файл server_config.json в текстовом редакторе.
       ВСЕ ЗАПИСИ ДОЛЖНЫ БЫТЬ В КОДИРОВКЕ ASCII ИЛИ UTF-8!
    4. Можно просматривать или менять следующие параметры:
        а. basicServerData
            i. name: отображаемое название личного сервера.
            ii. ipv4: IP-адрес вашего личного сервера в локальной сети. Адрес 0.0.0.0 позволит компьютеру, где размещён сервер, отслеживать весь трафик из локальной сети. Скорее всего, вам не понадобится менять данный адрес, разве что вы захотите, чтобы ваш сервер работал на определённой сетевой карте или с определённым интерфейсом.
            iii. port: порт для личного сервера. Не рекомендуем менять его, если того не требуют настройки файервола или маршрутизатора, и если вы не хотите установить несколько серверов на один компьютер (тогда каждому серверу понадобится свой порт).
            iv. saveFolderPath: здесь будут сохраняться игровые данные. Если вы устанавливаете несколько серверов на один компьютер, данный параметр нужно будет сменить.
        б. universeSize (Small/Normal/Large): размер вселенной на личном сервере.
        в. hideConsoleWindow (true/false): скрытие окна консоли. Если окно скрыто, закрыть сервер можно будет только завершением процесса в диспетчере задач.
        г. admins/users/guests
            i. Credentials
                • password: выберите пароли для входа на сервер разных групп пользователей. Групп всего три: администратор, пользователи и гости, и у каждой может быть свой пароль и права. Давайте игрокам пароль только от группы с теми правами, которые готовы им предоставить, и никому не сообщайте свой пароль администратора!
            ii. canLogin (true/false): определяет, может ли группа пользователей входить на сервер.
            iii. canKickPlayers (true/false): определяет, может ли группа пользователей выгонять других игроков с сервера.
            iv. canModifyWorld (true/false): определяет, может ли группа пользователей добывать или строить блоки или предметы.
            v. canInteractWithLockables: (true/false) определяет, может ли данная группа пользователей взаимодействовать с сундуками. Чтобы не допустить выкапывания сундуков, нужно использовать вместе с canModifyWorld.
        
    5. Откройте приложение pk_dedicated_server.exe ещё раз, чтобы запустить личный сервер с новыми настройками.
    6. Если ваш личный сервер работает через маршрутизатор (а обычно так и бывает), нужно будет настроить переадресацию портов в маршрутизаторе, чтобы игровые данные приходили на компьютер с сервером. Для этого нужно открыть администраторскую страницу маршрутизатора и найти там раздел переадресации портов. Затем можно попытаться добавить новую службу или пользовательскую службу, если маршрутизатор позволяет такое. При установке нового правила понадобится ввести его название: можете выбрать любое, но для удобства рекомендуем выбрать portalknights. Тип правила должен быть UDP. Для всех портов (как внутренних, так и внешних) введите 16365, если только вы не меняли порт в конфигурационном файле (в этом случае введите тот порт, который указали там). В поле выходного или серверного IP укажите адрес своей локальной сети, который можно узнать по команде ipconfig в командной строке. Если понадобится ввести какие-либо другие данные, пропустите эти пункты и следуйте дальше. Дополнительные сведения о настройке переадресации портов можно найти на сайте https://portforward.com/. Помните, что, если не дать компьютеру с сервером статический IP-адрес, то адрес может смениться в локальной сети, и правила переадресации портов перестанут действовать. Сведения о том, как дать компьютеру статический IP-адрес, можно найти в руководстве пользователя для вашего маршрутизатора.

    7. Отправьте свой внешний IP-адрес и пароль от группы пользователей людям, которых хотите пустить на сервер. Помните, что IP-адрес, указанный для переадресации порта, НЕ ЯВЛЯЕТСЯ ВНЕШНИМ IP-адресом, это IP-адрес локальной сети. Чтобы узнать внешний IP-адрес, необходимый для подключения пользователей, нужно будет зайти на сайт вроде http://whatismyip.host/. Отправляйте пользователям адрес IP v4, а не IP v6 (IP-адрес должен выглядеть так: xxx.xxx.xxx.xxx, а не так: xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx)

    Чтобы настроить несколько серверов на одном компьютере, понадобятся аргументы для командной строки, приведённые ниже. С их помощью можно будет задать каждому серверу свою конфигурацию и соответственно поменять конфигурационные файлы каждого сервера.
        
    Аргументы:
        а. -config myConfig.json: конфигурационный файл myConfig.json понадобится для установки сервера.
                      
                      i. Если конфигурационного файла с таким именем не существует, он будет создан и использован по умолчанию. Вы можете называть свои конфигурационные файлы как угодно, myConfig.json — лишь пример.

        б. -log mylogfile.log: данные журнала будут записаны в указанный файл.
    
            Пример:
        pk_dedicated_server -config myOwnConfig.json -log testServer.log
        Команда запустит личный сервер с конфигурацией из файла myOwnConfig.json, а данные журнала будет записывать в файл testServer.log


Config File Format:

    {
        "basicServerData": {
            "name": "Servername",
            "ipv4": "0.0.0.0",
            "port": 16365,
            "saveFolderPath": "./savedata"
        },
        "universeSize": "Normal",
        "hideConsoleWindow": false,
        "admins": {
            "credentials": {
                "password": "admin_password_please_change"
            },
            "canLogin": true,
            "canKickPlayers": true,
            "canModifyWorld": true,
            "canInteractWithLockables": true
        },
        "users": {
            "credentials": {
                "password": ""
            },
            "canLogin": true,
            "canKickPlayers": false,
            "canModifyWorld": true,
            "canInteractWithLockables": true
        },
        "guests": {
            "credentials": {
                "password": ""
            },
            "canLogin": false,
            "canKickPlayers": false,
            "canModifyWorld": false,
            "canInteractWithLockables": false
        }
    }
    
    
Лицензия:
    ИСПОЛЬЗОВАНИЕ ЛИЧНЫХ ИЛИ НЕЗАВИСИМЫХ СЕРВЕРОВ

    Покупая и используя Программный Продукт, вы получаете только лицензионное разрешение на использование Программного Продукта в соответствии с условиями данного Лицензионного Соглашения, куда входит разрешение на распространение исполняемого файла продукта на личных или независимых серверах (далее — Личные Серверы) при условии, что любая третья сторона, желающая получить доступ к Программному Продукту на Личном Сервере, будет обязана купить полную версию Программного Продукта, включая исполняемый файл полной версии Программного Продукта, что даст третьей стороне собственную лицензию.

    Вы выражаете своё согласие на то, что Лицензиар не несёт никакой ответственности за то, что сторонние пользователи делают с какими-либо материалами, найденными на каком-либо Личном Сервере, к которому вы даёте доступ.
    
    Любое использование Личного Сервера и любые материалы, созданные или распространяемые с помощью Личного Сервера, должны соответствовать следующим неисключительным требованиям:

      • быть оригинальными и не нарушать права на интеллектуальную собственность каких-либо третьих сторон
      • не нарушать законов юрисдикций, из которых может быть получен доступ
      • не иметь оскорбительного, порнографического, унижающего или дискриминирующего содержания
      • не иметь заведомо ложного или недостоверного содержания
      • не использовать оскорбительных или запугивающих материалов и не вредить репутации третьих сторон или Лицензиара каким-либо иным способом
      • не содержать рекламу и не требовать настоящих денег за игровую валюту
      • не заявлять о себе как о сервере или о материале, предлагаемом или одобренном Лицензиаром

    Во избежание сомнений: вы будете отвечать за все материалы, к которым даёте доступ на Личном Сервере, созданные как вами, так и третьей стороной с помощью вашего Личного Сервера. Таким образом, вы сообщаете и гарантируете Лицензиару, что имеете полное право размещать Программный Продукт на своём Личном Сервере, делаете это в соответствии с условиями данного Соглашения и имеете право давать Лицензиару и любой вышеописанной третьей стороне разрешения и лицензии, кои согласились давать, используя Личный Сервер.